# 230612-0618.2~Serial Communication&UART,USART（串行通信与通用异步收发，通用同步收发）

## Serial communication（串行通信）

串行通信是一种相对于并行通信的概念。指的是信号在1bit带宽的线路上进行传输；例如一字节信息即八位需要一位一位由高位到低位或由低位到高位逐位传输，而并行通信则是多bit带宽线路，传输以字节信息可能是八位同时发送，通过信号线判断所在位的信号，缺陷在于多条线信号同步要求很高，在实际干扰环境下通信效率可能不如串行通信。

直到这里串行通信的概念只是一个十分笼统的理论模型，并没有规定任何协议而只是一个通信思路。不涉及OSI模型的任何一层。

UART，SPI,I²C，CAN都是串行通信的思想。

## UART（通用异步收发）

UART是一种将串行通信思想付诸实现的一种，串行，异步通信总线协议，囊括了232，485等各类接口标准规范和总线标准规范。UART协议较为宽泛地规定了标准，涉及OSI模型的物理层和数据链路层：

| OSI层数 | OSI层      | 协议内容                     |
| ------- | ---------- | ---------------------------- |
| 2       | 数据链路层 | 帧格式                       |
| 1       | 物理层     | 线路，电平值，速度，主从模式 |

### 物理层

| 协议项         | 协议要求                                           |
| -------------- | -------------------------------------------------- |
| 链接线电气特性 | 全双工3根线：TX（发送线）,RX（接收线）,GND（地线） |
| 电平值         | 视具体协议                                         |
| 速度           | 波特率：1200Hz~115200Hz                            |
| 主从模式       | 单主单从，一一对应，互为主从，主从波特率需要一致   |

### 数据链路层

UART协议帧格式：

| 位         | bit数   | 具体操作                                               |
| ---------- | ------- | ------------------------------------------------------ |
| 起始位     | 1 bit   | 不传输时保持高电平，拉低到低电平保持一个波特周期即生效 |
| 数据位     | 5~8 bit | 一般传输一个字节，所以是8bit                           |
| 奇偶效验位 | 0~1 bit | 0：数据位中1的个数是偶数，1：数据位中1的个数是奇数     |
| 停止位     | 1~2 bit | 从低电平拉升到高电平保持一到两个电平周期即生效         |

传输时帧内无间隔，相邻两帧间隔任意时长。

### UART&USART

|          | USART                              | UART                                             |
| -------- | ---------------------------------- | ------------------------------------------------ |
| 传输单位 | 由若干字符组成的信息帧             | 由若干bit组成的字符                              |
| 单位格式 | 同步字符+数据位+字符校验位         | 起始位+数据位+奇偶校验位+停止位                  |
| 传输间隔 | 一个信息帧内，字符与字符之间无间隔 | 相邻两个字符间隔任意时长                         |
| 时钟信号 | 时序要求高，使用同频同相的时钟路线 | 时序要求低，使用各自的时钟信号，只需要波特率相同 |
| 优点     | 效率高                             | 简单                                             |
| 缺点     | 复杂                               | 效率低（传输一个字符要增加20%的附加信息位）      |
